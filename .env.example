# ==========================================
# YouTube Downloader Serverless 环境变量配置
# ==========================================

# CORS配置 - 允许的域名（逗号分隔）
# 生产环境示例
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# 开发环境会自动允许 localhost，无需配置
# 如果未配置，生产环境将允许所有域名（不推荐）

# ==========================================
# API安全配置（可选）
# ==========================================

# API密钥 - 启用后所有请求需要提供密钥
# 请使用复杂的随机字符串，建议32位以上
# API_SECRET_KEY=your-very-secure-random-api-key-here-32chars

# 使用方法：
# 1. 请求头: X-API-Key: your-api-key
# 2. 查询参数: ?api_key=your-api-key
# 3. curl示例: curl -H "X-API-Key: your-api-key" "https://your-site.netlify.app/.netlify/functions/getDownloadLinks?url=VIDEO_URL"

# ==========================================
# 限流配置
# ==========================================

# 是否启用IP限流（默认: true）
ENABLE_RATE_LIMIT=true

# 每分钟允许的请求次数（默认: 6次）
RATE_LIMIT_PER_MINUTE=6

# ==========================================
# 超时配置
# ==========================================

# 后端函数超时时间（毫秒，默认: 10000ms = 10秒）
# 注意：Netlify免费版最大限制为10秒
FUNCTION_TIMEOUT=10000

# 前端请求超时时间（毫秒，默认: 15000ms = 15秒）
# 应该大于后端超时时间
FRONTEND_TIMEOUT=15000

# ==========================================
# 部署说明
# ==========================================

# 1. 在Netlify控制台中设置这些环境变量
# 2. 复制此文件为 .env 并填入实际值（仅用于本地开发）
# 3. 确保 .env 文件已加入 .gitignore，不要提交到代码库

# ==========================================
# 安全建议
# ==========================================

# 1. 生产环境必须配置 ALLOWED_ORIGINS
# 2. 如果是公开API，考虑启用 API_SECRET_KEY
# 3. 根据服务器性能调整限流设置
# 4. 定期更换 API_SECRET_KEY

# ==========================================
# 故障排除
# ==========================================

# 如果遇到CORS错误：
# - 检查 ALLOWED_ORIGINS 是否包含你的域名
# - 确保域名格式正确（包含协议 https://）

# 如果遇到限流问题：
# - 检查 ENABLE_RATE_LIMIT 设置
# - 调整 RATE_LIMIT_PER_MINUTE 值

# 如果遇到超时问题：
# - 检查 FUNCTION_TIMEOUT 设置
# - 确保不超过Netlify限制